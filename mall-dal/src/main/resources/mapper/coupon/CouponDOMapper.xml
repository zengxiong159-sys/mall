<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qdbank.mall.mapper.coupon.CouponDOMapper">
  <resultMap id="BaseResultMap" type="com.qdbank.mall.model.coupon.CouponDO">
    <id column="COUPON_ID" jdbcType="DECIMAL" property="couponId" />
    <result column="BATCH_NO" jdbcType="VARCHAR" property="batchNo" />
    <result column="COUPON_NAME" jdbcType="VARCHAR" property="couponName" />
    <result column="COUPON_TYPE" jdbcType="DECIMAL" property="couponType" />
    <result column="ALL_TOTAL" jdbcType="DECIMAL" property="allTotal" />
    <result column="PRODUCT_INTEGRATION" jdbcType="DECIMAL" property="productIntegration" />
    <result column="COUPON_AMOUNT" jdbcType="DECIMAL" property="couponAmount" />
    <result column="COUPON_DESCRIPTION" jdbcType="VARCHAR" property="couponDescription" />
    <result column="PRODUCT_STATUS" jdbcType="DECIMAL" property="productStatus" />
    <result column="BATCH_STATUS" jdbcType="DECIMAL" property="batchStatus" />
    <result column="PRODUCT_TYPE" jdbcType="DECIMAL" property="productType" />
    <result column="PRODUCT_ID" jdbcType="DECIMAL" property="productId" />
    <result column="PRODUCT_NAME" jdbcType="VARCHAR" property="productName" />
    <result column="PRODUCT_SKU_ID" jdbcType="DECIMAL" property="productSkuId" />
    <result column="FILE_NAME" jdbcType="VARCHAR" property="fileName" />
    <result column="FILE_URL" jdbcType="VARCHAR" property="fileUrl" />
    <result column="EXPIRE_DAYS" jdbcType="DECIMAL" property="expireDays" />
    <result column="START_TIME" jdbcType="TIMESTAMP" property="startTime" />
    <result column="END_TIME" jdbcType="TIMESTAMP" property="endTime" />
    <result column="SEND_TIME" jdbcType="TIMESTAMP" property="sendTime" />
    <result column="GROUP_ID" jdbcType="VARCHAR" property="groupId" />
    <result column="CREATE_TIME" jdbcType="TIMESTAMP" property="createTime" />
    <result column="UPDATE_TIME" jdbcType="TIMESTAMP" property="updateTime" />
    <result column="CREATED_BY" jdbcType="VARCHAR" property="createdBy" />
    <result column="UPDATED_BY" jdbcType="VARCHAR" property="updatedBy" />
    <result column="EXCHANGE_COUPON_ID" jdbcType="DECIMAL" property="relCouponId" />
    <result column="DISTRIBUTE_WAY" jdbcType="DECIMAL" property="distributeWay" />
    <result column="MAIN_ACTIVITY_ID" jdbcType="VARCHAR" property="mainActivityId" />
    <result column="SUB_ACTIVITY_ID" jdbcType="VARCHAR" property="subActivityId" />
    <result column="PREFECTURE_ID" jdbcType="DECIMAL" property="prefectureId" />
  </resultMap>
  <sql id="Example_Where_Clause">
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    COUPON_ID, BATCH_NO, COUPON_NAME, COUPON_TYPE, ALL_TOTAL, PRODUCT_INTEGRATION, COUPON_AMOUNT, 
    COUPON_DESCRIPTION, PRODUCT_STATUS, BATCH_STATUS, PRODUCT_TYPE, PRODUCT_ID, PRODUCT_NAME, 
    PRODUCT_SKU_ID, FILE_NAME, FILE_URL, EXPIRE_DAYS, START_TIME, END_TIME,
    SEND_TIME, GROUP_ID, CREATE_TIME, UPDATE_TIME, CREATED_BY, UPDATED_BY,EXCHANGE_COUPON_ID,
    DISTRIBUTE_WAY,MAIN_ACTIVITY_ID,SUB_ACTIVITY_ID,PREFECTURE_ID
  </sql>
  <select id="selectByExample" parameterType="com.qdbank.mall.model.coupon.CouponDOExample" resultMap="BaseResultMap">
    select
    <if test="distinct">
      distinct
    </if>
    'true' as QUERYID,
    <include refid="Base_Column_List" />
    from SMS_COUPON
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from SMS_COUPON
    where COUPON_ID = #{couponId,jdbcType=DECIMAL}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    delete from SMS_COUPON
    where COUPON_ID = #{couponId,jdbcType=DECIMAL}
  </delete>
  <delete id="deleteByExample" parameterType="com.qdbank.mall.model.coupon.CouponDOExample">
    delete from SMS_COUPON
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.qdbank.mall.model.coupon.CouponDO">
    insert into SMS_COUPON (COUPON_ID, BATCH_NO, COUPON_NAME, 
      COUPON_TYPE, ALL_TOTAL, PRODUCT_INTEGRATION, 
      COUPON_AMOUNT, COUPON_DESCRIPTION, PRODUCT_STATUS, 
      BATCH_STATUS, PRODUCT_TYPE, PRODUCT_ID, 
      PRODUCT_NAME, PRODUCT_SKU_ID, FILE_NAME, 
      FILE_URL, EXPIRE_DAYS,
      START_TIME, END_TIME, SEND_TIME, 
      GROUP_ID, CREATE_TIME, UPDATE_TIME, 
      CREATED_BY, UPDATED_BY, EXCHANGE_COUPON_ID, DISTRIBUTE_WAY,PREFECTURE_ID)
    values (#{couponId,jdbcType=DECIMAL}, #{batchNo,jdbcType=VARCHAR}, #{couponName,jdbcType=VARCHAR},
      #{couponType,jdbcType=DECIMAL}, #{allTotal,jdbcType=DECIMAL}, #{productIntegration,jdbcType=DECIMAL}, 
      #{couponAmount,jdbcType=DECIMAL}, #{couponDescription,jdbcType=VARCHAR}, #{productStatus,jdbcType=DECIMAL}, 
      #{batchStatus,jdbcType=DECIMAL}, #{productType,jdbcType=DECIMAL}, #{productId,jdbcType=DECIMAL}, 
      #{productName,jdbcType=VARCHAR}, #{productSkuId,jdbcType=DECIMAL}, #{fileName,jdbcType=VARCHAR}, 
      #{fileUrl,jdbcType=VARCHAR}, #{expireDays,jdbcType=DECIMAL},
      #{startTime,jdbcType=TIMESTAMP}, #{endTime,jdbcType=TIMESTAMP}, #{sendTime,jdbcType=TIMESTAMP},
      #{groupId,jdbcType=VARCHAR}, #{createTime,jdbcType=TIMESTAMP}, #{updateTime,jdbcType=TIMESTAMP}, 
      #{createdBy,jdbcType=VARCHAR}, #{updatedBy,jdbcType=VARCHAR}, #{relCouponId,jdbcType=DECIMAL},
      #{distributeWay,jdbcType=DECIMAL}, #{prefectureId,jdbcType=DECIMAL})
  </insert>
  <insert id="insertSelective" parameterType="com.qdbank.mall.model.coupon.CouponDO">
    insert into SMS_COUPON
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="couponId != null">
        COUPON_ID,
      </if>
      <if test="batchNo != null">
        BATCH_NO,
      </if>
      <if test="couponName != null">
        COUPON_NAME,
      </if>
      <if test="couponType != null">
        COUPON_TYPE,
      </if>
      <if test="allTotal != null">
        ALL_TOTAL,
      </if>
      <if test="productIntegration != null">
        PRODUCT_INTEGRATION,
      </if>
      <if test="couponAmount != null">
        COUPON_AMOUNT,
      </if>
      <if test="couponDescription != null">
        COUPON_DESCRIPTION,
      </if>
      <if test="productStatus != null">
        PRODUCT_STATUS,
      </if>
      <if test="batchStatus != null">
        BATCH_STATUS,
      </if>
      <if test="productType != null">
        PRODUCT_TYPE,
      </if>
      <if test="productId != null">
        PRODUCT_ID,
      </if>
      <if test="productName != null">
        PRODUCT_NAME,
      </if>
      <if test="productSkuId != null">
        PRODUCT_SKU_ID,
      </if>
      <if test="fileName != null">
        FILE_NAME,
      </if>
      <if test="fileUrl != null">
        FILE_URL,
      </if>
      <if test="expireDays != null">
        EXPIRE_DAYS,
      </if>
      <if test="startTime != null">
        START_TIME,
      </if>
      <if test="endTime != null">
        END_TIME,
      </if>
      <if test="sendTime != null">
        SEND_TIME,
      </if>
      <if test="groupId != null">
        GROUP_ID,
      </if>
      <if test="createTime != null">
        CREATE_TIME,
      </if>
      <if test="updateTime != null">
        UPDATE_TIME,
      </if>
      <if test="createdBy != null">
        CREATED_BY,
      </if>
      <if test="updatedBy != null">
        UPDATED_BY,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="couponId != null">
        #{couponId,jdbcType=DECIMAL},
      </if>
      <if test="batchNo != null">
        #{batchNo,jdbcType=VARCHAR},
      </if>
      <if test="couponName != null">
        #{couponName,jdbcType=VARCHAR},
      </if>
      <if test="couponType != null">
        #{couponType,jdbcType=DECIMAL},
      </if>
      <if test="allTotal != null">
        #{allTotal,jdbcType=DECIMAL},
      </if>
      <if test="productIntegration != null">
        #{productIntegration,jdbcType=DECIMAL},
      </if>
      <if test="couponAmount != null">
        #{couponAmount,jdbcType=DECIMAL},
      </if>
      <if test="couponDescription != null">
        #{couponDescription,jdbcType=VARCHAR},
      </if>
      <if test="productStatus != null">
        #{productStatus,jdbcType=DECIMAL},
      </if>
      <if test="batchStatus != null">
        #{batchStatus,jdbcType=DECIMAL},
      </if>
      <if test="productType != null">
        #{productType,jdbcType=DECIMAL},
      </if>
      <if test="productId != null">
        #{productId,jdbcType=DECIMAL},
      </if>
      <if test="productName != null">
        #{productName,jdbcType=VARCHAR},
      </if>
      <if test="productSkuId != null">
        #{productSkuId,jdbcType=DECIMAL},
      </if>
      <if test="fileName != null">
        #{fileName,jdbcType=VARCHAR},
      </if>
      <if test="fileUrl != null">
        #{fileUrl,jdbcType=VARCHAR},
      </if>
      <if test="expireDays != null">
        #{expireDays,jdbcType=DECIMAL},
      </if>
      <if test="startTime != null">
        #{startTime,jdbcType=TIMESTAMP},
      </if>
      <if test="endTime != null">
        #{endTime,jdbcType=TIMESTAMP},
      </if>
      <if test="sendTime != null">
        #{sendTime,jdbcType=TIMESTAMP},
      </if>
      <if test="groupId != null">
        #{groupId,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null">
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateTime != null">
        #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="createdBy != null">
        #{createdBy,jdbcType=VARCHAR},
      </if>
      <if test="updatedBy != null">
        #{updatedBy,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.qdbank.mall.model.coupon.CouponDOExample" resultType="java.lang.Long">
    select count(*) from SMS_COUPON
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map">
    update SMS_COUPON
    <set>
      <if test="record.couponId != null">
        COUPON_ID = #{record.couponId,jdbcType=DECIMAL},
      </if>
      <if test="record.batchNo != null">
        BATCH_NO = #{record.batchNo,jdbcType=VARCHAR},
      </if>
      <if test="record.couponName != null">
        COUPON_NAME = #{record.couponName,jdbcType=VARCHAR},
      </if>
      <if test="record.couponType != null">
        COUPON_TYPE = #{record.couponType,jdbcType=DECIMAL},
      </if>
      <if test="record.allTotal != null">
        ALL_TOTAL = #{record.allTotal,jdbcType=DECIMAL},
      </if>
      <if test="record.productIntegration != null">
        PRODUCT_INTEGRATION = #{record.productIntegration,jdbcType=DECIMAL},
      </if>
      <if test="record.couponAmount != null">
        COUPON_AMOUNT = #{record.couponAmount,jdbcType=DECIMAL},
      </if>
      <if test="record.couponDescription != null">
        COUPON_DESCRIPTION = #{record.couponDescription,jdbcType=VARCHAR},
      </if>
      <if test="record.productStatus != null">
        PRODUCT_STATUS = #{record.productStatus,jdbcType=DECIMAL},
      </if>
      <if test="record.batchStatus != null">
        BATCH_STATUS = #{record.batchStatus,jdbcType=DECIMAL},
      </if>
      <if test="record.productType != null">
        PRODUCT_TYPE = #{record.productType,jdbcType=DECIMAL},
      </if>
      <if test="record.productId != null">
        PRODUCT_ID = #{record.productId,jdbcType=DECIMAL},
      </if>
      <if test="record.productName != null">
        PRODUCT_NAME = #{record.productName,jdbcType=VARCHAR},
      </if>
      <if test="record.productSkuId != null">
        PRODUCT_SKU_ID = #{record.productSkuId,jdbcType=DECIMAL},
      </if>
      <if test="record.fileName != null">
        FILE_NAME = #{record.fileName,jdbcType=VARCHAR},
      </if>
      <if test="record.fileUrl != null">
        FILE_URL = #{record.fileUrl,jdbcType=VARCHAR},
      </if>
      <if test="record.expireDays != null">
        EXPIRE_DAYS = #{record.expireDays,jdbcType=DECIMAL},
      </if>
      <if test="record.startTime != null">
        START_TIME = #{record.startTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.endTime != null">
        END_TIME = #{record.endTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.sendTime != null">
        SEND_TIME = #{record.sendTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.groupId != null">
        GROUP_ID = #{record.groupId,jdbcType=VARCHAR},
      </if>
      <if test="record.createTime != null">
        CREATE_TIME = #{record.createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.updateTime != null">
        UPDATE_TIME = #{record.updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.createdBy != null">
        CREATED_BY = #{record.createdBy,jdbcType=VARCHAR},
      </if>
      <if test="record.updatedBy != null">
        UPDATED_BY = #{record.updatedBy,jdbcType=VARCHAR},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    update SMS_COUPON
    set COUPON_ID = #{record.couponId,jdbcType=DECIMAL},
      BATCH_NO = #{record.batchNo,jdbcType=VARCHAR},
      COUPON_NAME = #{record.couponName,jdbcType=VARCHAR},
      COUPON_TYPE = #{record.couponType,jdbcType=DECIMAL},
      ALL_TOTAL = #{record.allTotal,jdbcType=DECIMAL},
      PRODUCT_INTEGRATION = #{record.productIntegration,jdbcType=DECIMAL},
      COUPON_AMOUNT = #{record.couponAmount,jdbcType=DECIMAL},
      COUPON_DESCRIPTION = #{record.couponDescription,jdbcType=VARCHAR},
      PRODUCT_STATUS = #{record.productStatus,jdbcType=DECIMAL},
      BATCH_STATUS = #{record.batchStatus,jdbcType=DECIMAL},
      PRODUCT_TYPE = #{record.productType,jdbcType=DECIMAL},
      PRODUCT_ID = #{record.productId,jdbcType=DECIMAL},
      PRODUCT_NAME = #{record.productName,jdbcType=VARCHAR},
      PRODUCT_SKU_ID = #{record.productSkuId,jdbcType=DECIMAL},
      FILE_NAME = #{record.fileName,jdbcType=VARCHAR},
      FILE_URL = #{record.fileUrl,jdbcType=VARCHAR},
      EXPIRE_DAYS = #{record.expireDays,jdbcType=DECIMAL},
      START_TIME = #{record.startTime,jdbcType=TIMESTAMP},
      END_TIME = #{record.endTime,jdbcType=TIMESTAMP},
      SEND_TIME = #{record.sendTime,jdbcType=TIMESTAMP},
      GROUP_ID = #{record.groupId,jdbcType=VARCHAR},
      CREATE_TIME = #{record.createTime,jdbcType=TIMESTAMP},
      UPDATE_TIME = #{record.updateTime,jdbcType=TIMESTAMP},
      CREATED_BY = #{record.createdBy,jdbcType=VARCHAR},
      UPDATED_BY = #{record.updatedBy,jdbcType=VARCHAR}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.qdbank.mall.model.coupon.CouponDO">
    update SMS_COUPON
    <set>
      <if test="batchNo != null">
        BATCH_NO = #{batchNo,jdbcType=VARCHAR},
      </if>
      <if test="couponName != null">
        COUPON_NAME = #{couponName,jdbcType=VARCHAR},
      </if>
      <if test="couponType != null">
        COUPON_TYPE = #{couponType,jdbcType=DECIMAL},
      </if>
      <if test="allTotal != null">
        ALL_TOTAL = #{allTotal,jdbcType=DECIMAL},
      </if>
      <if test="productIntegration != null">
        PRODUCT_INTEGRATION = #{productIntegration,jdbcType=DECIMAL},
      </if>
      <if test="couponAmount != null">
        COUPON_AMOUNT = #{couponAmount,jdbcType=DECIMAL},
      </if>
      <if test="couponDescription != null">
        COUPON_DESCRIPTION = #{couponDescription,jdbcType=VARCHAR},
      </if>
      <if test="productStatus != null">
        PRODUCT_STATUS = #{productStatus,jdbcType=DECIMAL},
      </if>
      <if test="batchStatus != null">
        BATCH_STATUS = #{batchStatus,jdbcType=DECIMAL},
      </if>
      <if test="productType != null">
        PRODUCT_TYPE = #{productType,jdbcType=DECIMAL},
      </if>
      <if test="productId != null">
        PRODUCT_ID = #{productId,jdbcType=DECIMAL},
      </if>
      <if test="productName != null">
        PRODUCT_NAME = #{productName,jdbcType=VARCHAR},
      </if>
      <if test="productSkuId != null">
        PRODUCT_SKU_ID = #{productSkuId,jdbcType=DECIMAL},
      </if>
      <if test="fileName != null">
        FILE_NAME = #{fileName,jdbcType=VARCHAR},
      </if>
      <if test="fileUrl != null">
        FILE_URL = #{fileUrl,jdbcType=VARCHAR},
      </if>
      <if test="expireDays != null">
        EXPIRE_DAYS = #{expireDays,jdbcType=DECIMAL},
      </if>
      <if test="startTime != null">
        START_TIME = #{startTime,jdbcType=TIMESTAMP},
      </if>
      <if test="endTime != null">
        END_TIME = #{endTime,jdbcType=TIMESTAMP},
      </if>
      <if test="sendTime != null">
        SEND_TIME = #{sendTime,jdbcType=TIMESTAMP},
      </if>
      <if test="groupId != null">
        GROUP_ID = #{groupId,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null">
        CREATE_TIME = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateTime != null">
        UPDATE_TIME = #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="createdBy != null">
        CREATED_BY = #{createdBy,jdbcType=VARCHAR},
      </if>
      <if test="updatedBy != null">
        UPDATED_BY = #{updatedBy,jdbcType=VARCHAR},
      </if>
      <if test="relCouponId != null">
        EXCHANGE_COUPON_ID = #{relCouponId,jdbcType=DECIMAL},
      </if>
      <if test="prefectureId != null">
        PREFECTURE_ID = #{prefectureId,jdbcType=DECIMAL},
      </if>
    </set>
    where COUPON_ID = #{couponId,jdbcType=DECIMAL}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.qdbank.mall.model.coupon.CouponDO">
    update SMS_COUPON
    set BATCH_NO = #{batchNo,jdbcType=VARCHAR},
      COUPON_NAME = #{couponName,jdbcType=VARCHAR},
      COUPON_TYPE = #{couponType,jdbcType=DECIMAL},
      ALL_TOTAL = #{allTotal,jdbcType=DECIMAL},
      PRODUCT_INTEGRATION = #{productIntegration,jdbcType=DECIMAL},
      COUPON_AMOUNT = #{couponAmount,jdbcType=DECIMAL},
      COUPON_DESCRIPTION = #{couponDescription,jdbcType=VARCHAR},
      PRODUCT_STATUS = #{productStatus,jdbcType=DECIMAL},
      BATCH_STATUS = #{batchStatus,jdbcType=DECIMAL},
      PRODUCT_TYPE = #{productType,jdbcType=DECIMAL},
      PRODUCT_ID = #{productId,jdbcType=DECIMAL},
      PRODUCT_NAME = #{productName,jdbcType=VARCHAR},
      PRODUCT_SKU_ID = #{productSkuId,jdbcType=DECIMAL},
      FILE_NAME = #{fileName,jdbcType=VARCHAR},
      FILE_URL = #{fileUrl,jdbcType=VARCHAR},
      EXPIRE_DAYS = #{expireDays,jdbcType=DECIMAL},
      START_TIME = #{startTime,jdbcType=TIMESTAMP},
      END_TIME = #{endTime,jdbcType=TIMESTAMP},
      SEND_TIME = #{sendTime,jdbcType=TIMESTAMP},
      GROUP_ID = #{groupId,jdbcType=VARCHAR},
      CREATE_TIME = #{createTime,jdbcType=TIMESTAMP},
      UPDATE_TIME = #{updateTime,jdbcType=TIMESTAMP},
      CREATED_BY = #{createdBy,jdbcType=VARCHAR},
      UPDATED_BY = #{updatedBy,jdbcType=VARCHAR}
    where COUPON_ID = #{couponId,jdbcType=DECIMAL}
  </update>

  <update id="updateExpireCoupon">
    UPDATE
        SMS_COUPON
    SET
        BATCH_STATUS = 2,
        UPDATE_TIME = sysdate
    WHERE
        COUPON_TYPE in(1,2)
    AND BATCH_STATUS not in (2,3)
    AND
       END_TIME &lt; #{endDate,jdbcType=TIMESTAMP}
    AND
       END_TIME &gt; #{startDate,jdbcType=TIMESTAMP}
  </update>

  <select id="selectExpireBatchNos" resultType="java.lang.String" >
        SELECT
            BATCH_NO
        FROM
            SMS_COUPON
        WHERE
            COUPON_TYPE in(1,2)
        AND
            BATCH_STATUS != 2
        AND
            END_TIME &lt; #{endDate,jdbcType=TIMESTAMP}
        AND
            END_TIME &gt; #{startDate,jdbcType=TIMESTAMP}
  </select>



  <update id="updateTotalCount">
    update
        SMS_COUPON
    set
        ALL_TOTAL = #{allTotal,jdbcType=DECIMAL}
    where
        COUPON_ID = #{couponId,jdbcType=DECIMAL}

  </update>


  <select id="qryCouponDetailByUserCouponId" parameterType="java.lang.Long" resultMap="BaseResultMap">
    select
    a.COUPON_ID, b.BATCH_NO, a.COUPON_NAME, a.COUPON_TYPE, a.ALL_TOTAL, a.PRODUCT_INTEGRATION, a.COUPON_AMOUNT,
    a.COUPON_DESCRIPTION, a.PRODUCT_STATUS, a.BATCH_STATUS, a.PRODUCT_TYPE, a.PRODUCT_ID, a.PRODUCT_NAME,
    a.PRODUCT_SKU_ID, a.FILE_NAME, a.FILE_URL, a.EXPIRE_DAYS, a.START_TIME, a.END_TIME,
    a.SEND_TIME, a.GROUP_ID, a.CREATE_TIME, a.UPDATE_TIME, a.CREATED_BY, a.UPDATED_BY,a.EXCHANGE_COUPON_ID,a.DISTRIBUTE_WAY
    from SMS_COUPON a,SMS_USER_COUPON b
    where a.COUPON_ID=b.COUPON_ID and  b.USER_COUPON_ID = #{userCouponId,jdbcType=DECIMAL}
  </select>

  <select id="selectExpireIntegrationCouponBatchNos" resultType="java.lang.String" >
        SELECT
            BATCH_NO
        FROM
            SMS_COUPON
        WHERE
            COUPON_TYPE = 0
        AND
            BATCH_STATUS not in(2,3)
        AND
            DISTRIBUTE_WAY = 1
        AND
            END_TIME &lt; #{endDate,jdbcType=TIMESTAMP}
        AND
            END_TIME &gt; #{startDate,jdbcType=TIMESTAMP}
  </select>

  <update id="updateExpireIntegrationCoupon">
    UPDATE
        SMS_COUPON
    SET
        BATCH_STATUS = 2,
        UPDATE_TIME = sysdate
    WHERE
        COUPON_TYPE = 0
    AND BATCH_STATUS  not in (2,3)
    AND DISTRIBUTE_WAY = 1
    AND
       END_TIME &lt; #{endDate,jdbcType=TIMESTAMP}
    AND
       END_TIME &gt; #{startDate,jdbcType=TIMESTAMP}
  </update>

  <!-- 批量更新优惠券信息 -->
  <update id="batchUpdate" parameterType="java.util.List">
    <foreach collection="list" item="item" index="index"  open="begin" close=";end;" separator=";">
      UPDATE SMS_COUPON
      <set>
        <if test="item.mainActivityId != null and item.mainActivityId != ''">
          MAIN_ACTIVITY_ID = #{item.mainActivityId},
        </if>
        <if test="item.subActivityId != null and item.subActivityId != ''">
          SUB_ACTIVITY_ID = #{item.subActivityId},
        </if>
        <if test="item.endTime != null">
          EXPIRE_DATE = #{item.endTime},
          END_TIME = #{item.endTime},
        </if>
        <if test="item.batchStatus != null">
          BATCH_STATUS = #{item.batchStatus,jdbcType=DECIMAL},
        </if>
      </set>
      where
      COUPON_ID = #{item.couponId,jdbcType=DECIMAL}
    </foreach>
  </update>

  <!-- 查询所有指定专区现金优惠券(白名单导入方式)批次号(待发放、已发放、待生效、已生效) -->
  <select id="selectDesignatedPrefectureCouponBatchNos" resultType="java.lang.String">
        SELECT
            sc.BATCH_NO
        FROM
            SMS_COUPON sc
        LEFT JOIN CMS_PREFECTURE cp ON sc.PREFECTURE_ID = cp.ID
        WHERE
            sc.COUPON_TYPE = 4
        AND
            sc.BATCH_STATUS not in(2,3,6)
        AND
            cp.PREFECTURE_TYPE = 0
        AND
            sc.END_TIME &lt; #{endDate,jdbcType=TIMESTAMP}
        AND
            sc.END_TIME &gt; #{startDate,jdbcType=TIMESTAMP}
  </select>

  <!-- 根据批次号批量更新指定专区现金优惠券为已过期(已失效) -->
  <update id="updateExpirePrefectureCoupon" parameterType="java.util.Map">
    <foreach collection="list" item="item" index="index"  open="begin" close=";end;" separator=";">
      UPDATE
        SMS_COUPON
      <set>
        <if test="batchStatus != null">
          BATCH_STATUS = #{batchStatus,jdbcType=DECIMAL},
        </if>
        UPDATE_TIME = sysdate
      </set>
      <where>
        BATCH_NO = #{item}
        <if test="endDate != null">
          AND END_TIME &lt; #{endDate,jdbcType=TIMESTAMP}
        </if>
        <if test="startDate != null">
         AND END_TIME &gt; #{startDate,jdbcType=TIMESTAMP}
        </if>
      </where>
    </foreach>
  </update>

  <!-- 优惠券信息all total自增 -->
  <update id="updateCouponAllTotal" parameterType="com.qdbank.mall.model.coupon.CouponDO">
    update SMS_COUPON set ALL_TOTAL = ALL_TOTAL + 1,UPDATE_TIME = sysdate where COUPON_ID = #{couponId,jdbcType=DECIMAL}
  </update>

  <update id="updateInvalidationCoupon">
     UPDATE
        SMS_COUPON t
     SET
        t.BATCH_STATUS = 6
     WHERE
        t.BATCH_STATUS = 5
     AND
        t.END_TIME &lt; #{endDate,jdbcType=TIMESTAMP}
     AND
        t.END_TIME &gt; #{startDate,jdbcType=TIMESTAMP}
  </update>

  <update id="updateById" parameterType="com.qdbank.mall.model.coupon.CouponDO">
    update SMS_COUPON
    set
      ALL_TOTAL = #{allTotal,jdbcType=DECIMAL},
      BATCH_STATUS = #{batchStatus,jdbcType=DECIMAL},
      FILE_NAME = #{fileName,jdbcType=VARCHAR},
      FILE_URL = #{fileUrl,jdbcType=VARCHAR},
      DISTRIBUTE_WAY = #{distributeWay,jdbcType=DECIMAL},
      UPDATE_TIME =  sysdate
    where COUPON_ID = #{couponId,jdbcType=DECIMAL}
  </update>
</mapper>